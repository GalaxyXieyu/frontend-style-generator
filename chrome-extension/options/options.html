<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Style Generator - 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="app-container">
    <!-- 侧边栏 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1>Style Generator</h1>
      </div>
      
      <nav class="sidebar-nav">
        <button class="nav-item active" data-page="models">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
            <path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>AI 模型</span>
        </button>
        
        <button class="nav-item" data-page="generate">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
            <polyline points="14 2 14 8 20 8" stroke="currentColor" stroke-width="2"/>
          </svg>
          <span>生成配置</span>
        </button>
        
        <button class="nav-item" data-page="history">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>历史与数据</span>
        </button>
      </nav>
      
      <div class="sidebar-footer">
        <div class="version">v3.0</div>
      </div>
    </aside>
    
    <!-- 主内容区 -->
    <main class="main-content">
      <!-- AI 模型管理页面 -->
      <div class="page active" id="modelsPage">
        <div class="page-header">
          <div>
            <h2>AI 模型管理</h2>
            <p class="page-description">管理多个 AI 模型配置，支持不同场景使用不同模型</p>
          </div>
          <button id="addModelBtn" class="btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>添加模型</span>
          </button>
        </div>
        
        <!-- 模型列表 -->
        <div class="models-grid" id="modelsList">
          <!-- 动态生成模型卡片 -->
        </div>
        
        <!-- 空状态 -->
        <div class="empty-state" id="modelsEmpty" style="display: none;">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/>
            <path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <p>还没有配置任何 AI 模型</p>
          <p style="font-size: 13px; color: var(--text-secondary); margin-top: 8px;">点击右上角“添加模型”按钮开始配置</p>
        </div>
      </div>
      
      <!-- 添加/编辑模型弹窗 -->
      <div class="modal" id="modelModal" style="display: none;">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content" style="max-width: 600px;">
          <div class="modal-header">
            <h3 id="modalTitle">添加 AI 模型</h3>
            <button class="close-btn" id="closeModalBtn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
          
          <div class="modal-body">
            <input type="hidden" id="editModelId">
            
            <div class="form-group">
              <label>模型名称 <span style="color: #ef4444;">*</span></label>
              <input type="text" id="modalModelName" class="input" placeholder="例如：GPT-4 Turbo">
              <small>给这个模型配置起一个易识别的名称</small>
            </div>
            
            <div class="form-group">
              <label>API Key <span style="color: #ef4444;">*</span></label>
              <div class="input-group">
                <input type="password" id="modalApiKey" class="input" placeholder="sk-...">
                <button id="modalToggleKeyBtn" class="icon-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <small>您的 API Key 仅保存在本地，不会上传到任何服务器</small>
            </div>
            
            <div class="form-group">
              <label>Base URL <span style="color: #ef4444;">*</span></label>
              <input type="text" id="modalBaseUrl" class="input" placeholder="https://api.openai.com/v1">
              <small>API 的基础 URL，使用代理时可修改</small>
            </div>
            
            <div class="form-group">
              <label>模型 ID <span style="color: #ef4444;">*</span></label>
              <input type="text" id="modalModelId" class="input" placeholder="gpt-4-turbo-preview">
              <small>API 调用时使用的模型标识符</small>
            </div>
            
            <div class="form-row">
              <div class="form-group" style="flex: 1;">
                <label>Temperature</label>
                <input type="range" id="modalTemperature" class="slider" min="0" max="1" step="0.1" value="0.7">
                <div class="slider-value">
                  <span>保守</span>
                  <span id="modalTemperatureValue" class="value">0.7</span>
                  <span>创新</span>
                </div>
                <small>控制生成内容的创造性</small>
              </div>
              
              <div class="form-group" style="flex: 1;">
                <label>Max Tokens</label>
                <input type="number" id="modalMaxTokens" class="input" value="4000" min="1000" max="16000">
                <small>控制生成内容的长度</small>
              </div>
            </div>
          </div>
          
          <div class="modal-footer">
            <button class="btn-secondary" id="cancelModalBtn">
              取消
            </button>
            <button id="saveModelBtn" class="btn-primary">
              <span id="saveModelBtnText">保存</span>
            </button>
          </div>
        </div>
      </div>
      
      <!-- 生成配置页面 -->
      <div class="page" id="generatePage">
        <div class="page-header">
          <h2>生成配置</h2>
          <p class="page-description">配置 AI 分析报告的生成内容和提示词</p>
        </div>
        
        <div class="card">
          <h3 class="card-title">分析内容</h3>
          <div class="options-grid">
            <label class="option-card">
              <input type="checkbox" id="includeColors" checked>
              <div class="option-content">
                <div class="option-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <div class="option-text">
                  <div class="option-title">色彩方案分析</div>
                  <div class="option-desc">分析主色调、辅助色和中性色</div>
                </div>
              </div>
            </label>
            
            <label class="option-card">
              <input type="checkbox" id="includeTypography" checked>
              <div class="option-content">
                <div class="option-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M4 7V4H20V7M9 20H15M12 4V20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="option-text">
                  <div class="option-title">字体系统分析</div>
                  <div class="option-desc">分析字体族、大小和层级</div>
                </div>
              </div>
            </label>
            
            <label class="option-card">
              <input type="checkbox" id="includeLayout" checked>
              <div class="option-content">
                <div class="option-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                    <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                    <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                    <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <div class="option-text">
                  <div class="option-title">布局分析</div>
                  <div class="option-desc">分析栅格系统和响应式设计</div>
                </div>
              </div>
            </label>
            
            <label class="option-card">
              <input type="checkbox" id="includeComponents" checked>
              <div class="option-content">
                <div class="option-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                    <path d="M9 9H15M9 15H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="option-text">
                  <div class="option-title">组件风格分析</div>
                  <div class="option-desc">分析按钮、卡片、表单等组件</div>
                </div>
              </div>
            </label>
            
            <label class="option-card">
              <input type="checkbox" id="includeAccessibility" checked>
              <div class="option-content">
                <div class="option-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 14C8.13 14 5 17.13 5 21H19C19 17.13 15.87 14 12 14Z" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <div class="option-text">
                  <div class="option-title">可访问性评估</div>
                  <div class="option-desc">评估 WCAG 标准符合度</div>
                </div>
              </div>
            </label>
            
            <label class="option-card">
              <input type="checkbox" id="includeRecommendations" checked>
              <div class="option-content">
                <div class="option-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </div>
                <div class="option-text">
                  <div class="option-title">AI 改进建议</div>
                  <div class="option-desc">获取专业的设计优化建议</div>
                </div>
              </div>
            </label>
          </div>
          
          <div class="form-group" style="margin-top: 24px;">
            <label>报告语言</label>
            <select id="language" class="input">
              <option value="zh-CN">简体中文</option>
              <option value="en">English</option>
            </select>
            <small style="color: var(--text-secondary); margin-top: 8px;">
              💡 提取完成后将自动生成 Markdown 分析报告
            </small>
          </div>
        </div>
        
        <!-- AI 提示词预览 -->
        <div class="card" style="margin-top: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h3 class="card-title">AI 提示词预览</h3>
            <button id="refreshPromptBtn" class="btn-secondary" style="padding: 8px 16px; font-size: 13px;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="margin-right: 6px;">
                <path d="M1 4V10H7M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M20.49 9C19.9828 7.56678 19.1209 6.28536 17.9845 5.27542C16.8482 4.26548 15.4745 3.55976 13.9917 3.22426C12.5089 2.88875 10.9652 2.93434 9.50481 3.35677C8.04437 3.77921 6.71475 4.56471 5.64 5.64L1 10M23 14L18.36 18.36C17.2853 19.4353 15.9556 20.2208 14.4952 20.6432C13.0348 21.0657 11.4911 21.1112 10.0083 20.7757C8.52547 20.4402 7.1518 19.7345 6.01547 18.7246C4.87913 17.7146 4.01717 16.4332 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              刷新
            </button>
          </div>
          <div class="prompt-preview" id="promptPreview">
            <pre><code id="promptContent">正在生成提示词...</code></pre>
          </div>
          <small style="color: var(--text-secondary); display: block; margin-top: 12px;">
            💡 这是根据你的配置生成的实际 AI 提示词，修改上方选项后点击“刷新”查看效果
          </small>
        </div>
        
        <div class="form-actions" style="margin-top: 20px;">
          <button id="saveGenerateConfigBtn" class="btn-primary">保存配置</button>
        </div>
      </div>
      
      <!-- 历史与数据页面 -->
      <div class="page" id="historyPage">
        <div class="page-header">
          <h2>历史与数据</h2>
          <p class="page-description">查看所有提取记录和管理本地数据</p>
        </div>
        
        <!-- 数据统计 -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-value" id="snapshotCount">0</div>
            <div class="stat-label">快照数量</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
                <polyline points="14 2 14 8 20 8" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-value" id="analysisCount">0</div>
            <div class="stat-label">分析报告</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                <path d="M21 16V8C21 6.9 20.1 6 19 6H5C3.9 6 3 6.9 3 8V16C3 17.1 3.9 18 5 18H19C20.1 18 21 17.1 21 16Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div class="stat-value" id="storageSize">0 MB</div>
            <div class="stat-label">存储占用</div>
          </div>
        </div>
        
        <!-- 数据管理操作 -->
        <div class="card">
          <div class="form-actions">
            <button id="exportDataBtn" class="btn-secondary">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M21 15V19C21 20.1 20.1 21 19 21H5C3.9 21 3 20.1 3 19V15" stroke="currentColor" stroke-width="2"/>
                <polyline points="7 10 12 15 17 10" stroke="currentColor" stroke-width="2"/>
                <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>导出所有数据</span>
            </button>
            <button id="clearDataBtn" class="btn-danger">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M19 6V20C19 21.1 18.1 22 17 22H7C5.9 22 5 21.1 5 20V6" stroke="currentColor" stroke-width="2"/>
                <path d="M8 6V4C8 2.9 8.9 2 10 2H14C15.1 2 16 2.9 16 4V6" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span>清除所有数据</span>
            </button>
          </div>
        </div>
        
        <!-- 历史记录列表 -->
        <div class="card" style="margin-top: 20px;">
          <h3 class="card-title">历史记录</h3>
          <div class="history-filters">
            <div class="search-box">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <input type="text" id="searchHistory" placeholder="搜索页面标题或 URL...">
            </div>
            <select id="filterType" class="input">
              <option value="all">全部</option>
              <option value="html">仅 HTML</option>
              <option value="markdown">仅 Markdown</option>
            </select>
          </div>
          
          <div class="history-list" id="historyList">
            <!-- 动态生成 -->
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <script type="module" src="js/main.js"></script>
</body>
</html>
